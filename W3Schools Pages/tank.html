<!DOCTYPE html>
<html lang="en">
<head>
    <title> Tank Game </title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jaro:opsz@6..72&display=swap');

        :root {
            --main-light-green: #71c285;
            --main-extra-light-green: #7ed09e;
            --main-dark-green: #4c8056;
            --main-light-grey: #5e5f62;
            --main-lighter-grey: #b2e3c5;
        }

        body {
            background-color: #9B7653;
            font-family: "Jaro", sans-serif;
            transition: 0.5s;
            overflow: hidden;
            margin: 0;
        }


        * {
            font-family: "Jaro", sans-serif;
            transition: 1s ease-in-out;
        }

        .tank {
            width: 9.75vw;
            height: 10.875vw;
            position: absolute;
            left: 45vw;
            top: 70vh;
            transition: left 0.1s, top 0.1s !important;
        }

        .tank * {
            transition: 0s;
        }

        @media screen and (min-aspect-ratio: 2.2/1) {

            .titleLeft {
                animation: title-up 0.3s ease-in;
                transition: 2s;
                animation-delay: 2.75s;
                animation-fill-mode: forwards;
            }

            .game {
                position: absolute;
            }
        }

        @media screen and (max-aspect-ratio: 2.2/1) {

            .titleLeft {
                animation: title-left 0.5s ease-in;
                transition: 2s;
                animation-fill-mode: forwards;
            }

            .game {
                position: absolute;
            }
        }

        @media screen and (min-aspect-ratio: 2.2/1) {
            #moveTitle {
                width: 50vw;
                position: absolute !important;

            }

            #continue {
                width: 18vw;
                position: absolute !important;
                left: calc(75vw - 10vw) !important;
                margin-left: 0 !important;
                bottom: calc(50vh - 18vh) !important;
            }

            .tank {
                left: 4vw;
                transform: scale(0) rotate(90deg) !important;
            }
        }


        .frontPage {
            font-size: 7vw;
            text-align: center;
            position: relative;
            top: 0;
            font-weight: bold;
        }


        .frontPage {
            position: relative;
            top: 10vh;
            opacity: 0;
            animation: title-fade-in 0.56s ease-out;
            animation-fill-mode: forwards;
        }


        @keyframes title-fade-in {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }


        @keyframes title-left {
            from {
                transform: scale(1);
            }
            to {
                transform: scale(-5);
                opacity: 0;
                display: none;
            }
        }


        @keyframes title-up {
            from {
                transform: scale(1);
            }
            to {
                transform: scale(-5);
                opacity: 0;
                display: none;
            }
        }


        .continue {
            width: 50vw;
            margin-left: 25vw;
            font-size: calc((3vw + 3vh) / 2);
            height: 14vh;
            position: absolute;
            bottom: calc(55vh - 28px);
            background-color: #00539C;
            border: none;
            color: white;
            cursor: pointer;
        }

        #moveTitle {
            letter-spacing: 0.2vw;
            position: absolute;
            top: -3vw;
            left: 25vw;
            width: 50vw;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        .removeButton {
            animation: growFade 1s ease-in-out forwards;
        }

        @keyframes growFade {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(-10);
                display: none;
            }
        }

        .game {
            width: 100vw;
            height: 100vh;
            opacity: 0;
            transform-origin: center;
        }

        .showPlayingGame {
            display: block;
            opacity: 1;
        }

        .tank * {
            position: absolute;
        }

        .tank {
            position: absolute;
        }

        :root {
            --resize-amount: 3/4;
        }

        .tankBody {
            top: calc(1.25vw * var(--resize-amount));
            width: calc(13vw * var(--resize-amount));
            height: calc(12vw * var(--resize-amount));
            background-color: var(--main-dark-green);
        }

        .tankTreads_1 {
            width: calc(3vw * var(--resize-amount));
            height: calc(14.5vw * var(--resize-amount));
            background-color: var(--main-light-green);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTreads_2 {
            left: calc(10vw * var(--resize-amount));
            width: calc(3vw * var(--resize-amount));
            height: calc(14.5vw * var(--resize-amount));
            background-color: var(--main-light-green);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTop {
            top: calc(3vw * var(--resize-amount));
            left: calc(0.25vw * var(--resize-amount));
            width: calc(8.5vw * var(--resize-amount));
            height: calc(8vw * var(--resize-amount));
            border-radius: calc(0.75vw * var(--resize-amount));
            background-color: var(--main-dark-green);
        }

        .tankTopSmall {
            top: calc(4vw * var(--resize-amount));
            left: calc(1.5vw * var(--resize-amount));
            width: calc(6vw * var(--resize-amount));
            height: calc(6vw * var(--resize-amount));
            border-radius: calc(0.75vw * var(--resize-amount));
            background-color: var(--main-light-green);
        }

        .nozzle {
            top: calc(-5.5vw * var(--resize-amount));
            left: calc(3.88vw * var(--resize-amount));
            width: calc(1.25vw * var(--resize-amount));
            height: calc(10vw * var(--resize-amount));
            background-color: var(--main-light-grey);
            border-radius: calc(0.35vw * var(--resize-amount));
        }

        .bigJointNozzle {
            top: calc(2vw * var(--resize-amount));
            left: calc(3.25vw * var(--resize-amount));
            width: calc(2.5vw * var(--resize-amount));
            height: calc(2.5vw * var(--resize-amount));
            background-color: var(--main-extra-light-green);
            border-radius: calc(0.25vw * var(--resize-amount));
        }

        .smallJointNozzle {
            top: calc(0.5vw * var(--resize-amount));
            left: calc(3.5vw * var(--resize-amount));
            width: calc(2vw * var(--resize-amount));
            height: calc(2vw * var(--resize-amount));
            background-color: var(--main-light-green);
            border-radius: calc(0.25vw * var(--resize-amount));
        }

        .lightTankTreads_1 {
            top: calc(3.75vw * var(--resize-amount));
            width: calc(3vw * var(--resize-amount));
            height: calc(2.5vw * var(--resize-amount));
            background-color: var(--main-extra-light-green);
        }

        .lightTankTreads_2 {
            top: calc(8vw * var(--resize-amount));
            width: calc(3vw * var(--resize-amount));
            height: calc(2.5vw * var(--resize-amount));
            background-color: var(--main-extra-light-green);
        }

        .lightTankTreads_3 {
            left: calc(10vw * var(--resize-amount));
            top: calc(3.75vw * var(--resize-amount));
            width: calc(3vw * var(--resize-amount));
            height: calc(2.5vw * var(--resize-amount));
            background-color: var(--main-extra-light-green);
        }

        .lightTankTreads_4 {
            left: calc(10vw * var(--resize-amount));
            top: calc(8vw * var(--resize-amount));
            width: calc(3vw * var(--resize-amount));
            height: calc(2.5vw * var(--resize-amount));
            background-color: var(--main-extra-light-green);
        }

        .tankTreadsFront_1 {
            top: calc(0.75vw * var(--resize-amount));
            left: calc(0.45vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(1.75vw * var(--resize-amount));
            background-color: var(--main-dark-green);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTreadsFront_2 {
            top: calc(12vw * var(--resize-amount));
            left: calc(0.45vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(1.75vw * var(--resize-amount));
            background-color: var(--main-dark-green);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTreadsBack_1 {
            top: calc(0.75vw * var(--resize-amount));
            left: calc(10.75vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(1.75vw * var(--resize-amount));
            background-color: var(--main-dark-green);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTreadsBack_2 {
            top: calc(12vw * var(--resize-amount));
            left: calc(10.75vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(1.75vw * var(--resize-amount));
            background-color: var(--main-dark-green);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTopSmallRight {
            top: calc(5vw * var(--resize-amount));
            left: calc(5vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(4vw * var(--resize-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTopSmallLeftTop {
            top: calc(5vw * var(--resize-amount));
            left: calc(2.5vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(1.05vw * var(--resize-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTopSmallLeftMiddle {
            top: calc(6.5vw * var(--resize-amount));
            left: calc(2.5vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(1.05vw * var(--resize-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .tankTopSmallLeftBottom {
            top: calc(7.95vw * var(--resize-amount));
            left: calc(2.5vw * var(--resize-amount));
            width: calc(1.75vw * var(--resize-amount));
            height: calc(1.05vw * var(--resize-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-amount));
        }

        .introAnimation {
            transform: scale(0);
            transition: transform 1s ease-in-out;
        }


        .shakeIntroElement {
            animation: shakeIntroElement 0.5s;
        }

        @keyframes shakeIntroElement {
            0% {
                transform: translate(1px, 1px) rotate(0deg);
            }
            10% {
                transform: translate(-1px, -2px) rotate(-1deg);
            }
            20% {
                transform: translate(-3px, 0px) rotate(1deg);
            }
            30% {
                transform: translate(3px, 2px) rotate(0deg);
            }
            40% {
                transform: translate(1px, -1px) rotate(1deg);
            }
            50% {
                transform: translate(-1px, 2px) rotate(-1deg);
            }
            60% {
                transform: translate(-3px, 1px) rotate(0deg);
            }
            70% {
                transform: translate(3px, 1px) rotate(-1deg);
            }
            80% {
                transform: translate(-1px, -1px) rotate(1deg);
            }
            90% {
                transform: translate(1px, 2px) rotate(0deg);
            }
            100% {
                transform: translate(1px, -2px) rotate(-1deg);
            }
        }

        .showIntroElement:not(.tank) {
            transform: scale(1);
        }

        @media screen and (min-aspect-ratio: 2.2/1) {
            .showIntroElement.tank {
                transform: scale(1) rotate(90deg) !important;
            }
        }

        @media screen and (max-aspect-ratio: 2.2/1) {
            .showIntroElement {
                transform: scale(1);
                }
        }

        #screen {
            width: 100vw;
            height: 100vh;
            position: absolute;
            z-index: 1;
            left: 0;
            top: 0;
        }

        .screenGone {
            display: none;
        }

        .instructions div {
            font-size: 3vw;
        }

        .wasdtoMove {
            text-align: center;
            position: absolute;
            left: 10vw;
            bottom: 20vh;
            width: 20vw;
        }

        .mousetoShoot {
            text-align: center;
            position: absolute;
            right: 10vw;
            bottom: 20vh;
            width: 20vw;
        }

        .fullTurret {
            width: 6.375vw;
            height: 9.75vw;
            position: relative !important;
            left: 1.5vw;
            top: 0.5vw;
            transform: translate(2.5vw, -1vw) rotate(0deg);
        }
    </style>
</head>
<body>
<div class="game" id="game">
    <div class="instructions">
        <div class="wasdtoMove">
            USE WASD TO MOVE
        </div>
        <div class="mousetoShoot">
            USE MOUSE TO AIM/SHOOT
        </div>

    </div>
    <div id="screen"></div>
</div>
<div class="tank introAnimation" id="tankMove">
    <div class="tankBody"></div>
    <div class="tankTreads_1"></div>
    <div class="tankTreads_2"></div>
    <div class="lightTankTreads_1"></div>
    <div class="lightTankTreads_2"></div>
    <div class="lightTankTreads_3"></div>
    <div class="lightTankTreads_4"></div>
    <div class="tankTreadsFront_1"></div>
    <div class="tankTreadsFront_2"></div>
    <div class="tankTreadsBack_1"></div>
    <div class="tankTreadsBack_2"></div>
    <div class="fullTurret" id='fullTurret'>
        <div class="tankTop"></div>
        <div class="nozzle"></div>
        <div class="smallJointNozzle"></div>
        <div class="bigJointNozzle"></div>
        <div class="tankTopSmall"></div>
        <div class="tankTopSmallRight"></div>
        <div class="tankTopSmallLeftTop"></div>
        <div class="tankTopSmallLeftMiddle"></div>
        <div class="tankTopSmallLeftBottom"></div>
    </div>
</div>
<div id="moveTitle" class="introAnimation">
    <div class="frontPage">
            THE TANK
            GAME
    </div>
</div>
<input type="button" class="continue introAnimation" value="<< PLAY >>" id="continue" onclick="continueFunction()">
<script>
    function continueFunction() {
        let title = document.getElementById("moveTitle");
        title.classList.add("titleLeft");
        let continueButton = document.getElementById("continue");
        continueButton.classList.add("removeButton");
        setTimeout(() => {
            let game = document.getElementById("game");
            game.classList.add("showPlayingGame")
            let screen = document.getElementById("screen");
            screen.classList.add("screenGone")
            document.addEventListener('keydown', (e) => {
                keys[e.code] = true;
            });

            document.addEventListener('keyup', (e) => {
                keys[e.code] = false;
            });

            document.addEventListener('mousemove', function(event) {
                updateTargetAngle(event);
            });
        }, 2000);

    }

    document.addEventListener('DOMContentLoaded', () => {
        const elements = ['moveTitle', 'tankMove', 'continue'];
        let delay = 0;

        elements.forEach((elementId) => {
            setTimeout(() => {
                document.getElementById(elementId).classList.add('showIntroElement');
                document.body.classList.add('shakeIntroElement');
                setTimeout(() => {
                    document.body.classList.remove('shakeIntroElement');
                }, 500); // Shake duration
            }, delay);
            delay += 1200; // 0.75s for the animation + 1s delay between each element
        });
    });


    const div = document.getElementById('tankMove');
    const turret = document.getElementById('fullTurret');
    let position = { x: 0, y: 0 };
    let speed = 0.25; // speed of movement in pixels per frame
    let keys = {};
    let mousePosition = { x: 0, y: 0 };
    let currentAngle = 0;
    let targetAngle = 0;
    let initialRotation = 90; // Adjust the initial rotation if needed
    let rotationSpeed = 5; // Base speed of rotation
    let angleThreshold = 0.1; // Threshold to stop rotation when close to target


    // Move Body
    function updatePosition() {
        if (keys['KeyW']) position.y -= speed;
        if (keys['KeyS']) position.y += speed;
        if (keys['KeyA']) position.x -= speed;
        if (keys['KeyD']) position.x += speed;
        div.style.transform = `translate(${position.x}vw, ${position.y}vh)`;
        requestAnimationFrame(updatePosition);
        }

    requestAnimationFrame(updatePosition);



    //Turn Turret
    function updateTargetAngle(event) {
        var turret = document.getElementById('fullTurret');
        var divRect = div.getBoundingClientRect();

        var divCenterX = divRect.left + divRect.width / 2;
        var divCenterY = divRect.top + divRect.height / 2;

        var angleRad = Math.atan2(event.clientY - divCenterY, event.clientX - divCenterX);
        targetAngle = angleRad * (180 / Math.PI) + initialRotation;
    }

    function normalizeAngle(angle) {
        return (angle + 360) % 360;
    }

    function rotateDiv() {
        var turret = document.getElementById('fullTurret');

        currentAngle = normalizeAngle(currentAngle);
        targetAngle = normalizeAngle(targetAngle);

        var angleDifference = targetAngle - currentAngle;

        if (Math.abs(angleDifference) > 180) {
            angleDifference = angleDifference > 0 ? angleDifference - 360 : angleDifference + 360;
        }

        if (Math.abs(angleDifference) > angleThreshold) {
            var adjustedSpeed = Math.min(rotationSpeed, Math.abs(angleDifference) / 2);
            currentAngle += adjustedSpeed * Math.sign(angleDifference);
            currentAngle = normalizeAngle(currentAngle);
        }

        turret.style.transform = 'rotate(' + currentAngle + 'deg)';
        requestAnimationFrame(rotateDiv);
    }

    rotateDiv();

</script>
</body>
</html>


