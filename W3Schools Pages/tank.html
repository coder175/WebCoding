<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Tank Game</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Jaro:opsz@6..72&display=swap');

        body {
            font-family: "Jaro", sans-serif;
            overflow: hidden;
            margin: 0;
            background-color: grey;
        }

        * {
            font-family: "Jaro", sans-serif;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        :root {
            --main-light-green: #71c285;
            --main-extra-light-green: #7ed09e;
            --main-dark-green: #4c8056;
            --main-light-grey: #5e5f62;
            --main-lighter-grey: #b2e3c5;
            --resize-tank-amount: 3/10;
        }

        .tank * {
            position: absolute;
        }

        .tank {
            transform: translate(50vw, 51vh);
            position: absolute;
            transition: 0.3s;
        }

        .innerStuff {
            left: calc(-6.5vw * var(--resize-tank-amount));
            top: calc(-6.7vw * var(--resize-tank-amount));
        }

        .tankBody {
            top: calc(1.25vw * var(--resize-tank-amount));
            width: calc(13vw * var(--resize-tank-amount));
            height: calc(12vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .tankTreads_1 {
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(14.5vw * var(--resize-tank-amount));
            background-color: var(--main-light-green);
            border-radius: calc(0.5vw * var(--resize-tank-amount));
            border-left: calc(2px * var(--resize-tank-amount)) solid var(--main-dark-green);
            border-right: calc(2px * var(--resize-tank-amount)) solid var(--main-dark-green);
        }

        .tankTreads_2 {
            left: calc(10vw * var(--resize-tank-amount));
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(14.5vw * var(--resize-tank-amount));
            background-color: var(--main-light-green);
            border-radius: calc(0.5vw * var(--resize-tank-amount));
            border-left: calc(2px * var(--resize-tank-amount)) solid var(--main-dark-green);
            border-right: calc(2px * var(--resize-tank-amount)) solid var(--main-dark-green);
        }

        .tankTop {
            top: calc(3.5vw * var(--resize-tank-amount));
            left: calc(-0.75vw * var(--resize-tank-amount));
            width: calc(8.5vw * var(--resize-tank-amount));
            height: calc(8vw * var(--resize-tank-amount));
            border-radius: calc(0.75vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .tankTopSmall {
            top: calc(4.5vw * var(--resize-tank-amount));
            left: calc(0.5vw * var(--resize-tank-amount));
            width: calc(6vw * var(--resize-tank-amount));
            height: calc(6vw * var(--resize-tank-amount));
            border-radius: calc(0.75vw * var(--resize-tank-amount));
            background-color: var(--main-light-green);
        }

        .nozzle {
            top: calc(-6vw * var(--resize-tank-amount));
            left: calc(2.88vw * var(--resize-tank-amount));
            width: calc(1.25vw * var(--resize-tank-amount));
            height: calc(10vw * var(--resize-tank-amount));
            background-color: var(--main-light-grey);
            border-radius: calc(0.35vw * var(--resize-tank-amount));
        }

        .bigJointNozzle {
            top: calc(2.5vw * var(--resize-tank-amount));
            left: calc(2.25vw * var(--resize-tank-amount));
            width: calc(2.5vw * var(--resize-tank-amount));
            height: calc(2.5vw * var(--resize-tank-amount));
            background-color: var(--main-extra-light-green);
            border-radius: calc(0.25vw * var(--resize-tank-amount));
        }

        .smallJointNozzle {
            top: calc(1vw * var(--resize-tank-amount));
            left: calc(2.5vw * var(--resize-tank-amount));
            width: calc(2vw * var(--resize-tank-amount));
            height: calc(2vw * var(--resize-tank-amount));
            background-color: #51b469;
            border-radius: calc(0.25vw * var(--resize-tank-amount));
        }

        .lightTankTreads_1 {
            top: 0;
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .lightTankTreads_2 {
            top: calc(4vw * var(--resize-tank-amount));
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .lightTankTreads_3 {
            left: calc(10vw * var(--resize-tank-amount));
            top: 0;
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .lightTankTreads_4 {
            left: calc(10vw * var(--resize-tank-amount));
            top: calc(4vw * var(--resize-tank-amount));
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .lightTankTreads_5 {
            left: calc(10vw * var(--resize-tank-amount));
            top: calc(8vw * var(--resize-tank-amount));
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .lightTankTreads_6 {
            top: calc(8vw * var(--resize-tank-amount));
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .lightTankTreads_7 {
            top: calc(12vw * var(--resize-tank-amount));
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .lightTankTreads_8 {
            left: calc(10vw * var(--resize-tank-amount));
            top: calc(12vw * var(--resize-tank-amount));
            width: calc(3vw * var(--resize-tank-amount));
            height: calc(.5vw * var(--resize-tank-amount));
            background-color: var(--main-dark-green);
        }

        .tankTopSmallRight {
            top: calc(5.5vw * var(--resize-tank-amount));
            left: calc(4vw * var(--resize-tank-amount));
            width: calc(1.75vw * var(--resize-tank-amount));
            height: calc(4vw * var(--resize-tank-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-tank-amount));
        }

        .tankTopSmallLeftTop {
            top: calc(5.5vw * var(--resize-tank-amount));
            left: calc(1.5vw * var(--resize-tank-amount));
            width: calc(1.75vw * var(--resize-tank-amount));
            height: calc(1.05vw * var(--resize-tank-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-tank-amount));
        }

        .tankTopSmallLeftMiddle {
            top: calc(7vw * var(--resize-tank-amount));
            left: calc(1.5vw * var(--resize-tank-amount));
            width: calc(1.75vw * var(--resize-tank-amount));
            height: calc(1.05vw * var(--resize-tank-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-tank-amount));
        }

        .tankTopSmallLeftBottom {
            top: calc(8.45vw * var(--resize-tank-amount));
            left: calc(1.5vw * var(--resize-tank-amount));
            width: calc(1.75vw * var(--resize-tank-amount));
            height: calc(1.05vw * var(--resize-tank-amount));
            background-color: var(--main-lighter-grey);
            border-radius: calc(0.5vw * var(--resize-tank-amount));
        }

        .fullTurret {
            position: absolute;
            width: calc(7.1vw * var(--resize-tank-amount));
            height: calc(14.5vw * var(--resize-tank-amount));
            left: calc(-6vw * var(--resize-tank-amount));
            top: calc(-6.5vw * var(--resize-tank-amount));
        }

        .fullTurret * {
            position: absolute;
        }

        .pauseAnimation {
            -webkit-animation-play-state: paused !important;
            -moz-animation-play-state: paused !important;
            -o-animation-play-state: paused !important;
            animation-play-state: paused !important;
        }

        @keyframes move {
            0% {
                transform: translateY(calc(-2vw * var(--resize-tank-amount)));
            }
            100% {
                transform: translateY(calc(2vw * var(--resize-tank-amount)));
            }
        }

        .movetreadsHide {
            top: calc(0.25vw * var(--resize-tank-amount));
            height: calc(14vw * var(--resize-tank-amount));
            width: calc(13vw * var(--resize-tank-amount));
            overflow: hidden;
        }

        .screenGone {
            display: none;
        }

        .instructions div {
            font-size: 3vw;
        }

        .wasdtoMove {
            text-align: center;
            position: fixed !important;
            z-index: 4 !important;
            margin-left: 26vw !important;
            top: 20vh !important;
            width: 20vw !important;
        }

        .mousetoShoot {
            text-align: center;
            position: fixed !important;
            z-index: 4 !important;
            margin-left: 66vw !important;
            top: 20vh !important;
            width: 20vw !important;
        }

        .introAnimation {
            transform: scale(0);
        }

        .intoAnimation.nottank {
            transform: scale(0);
            transition: transform 1s ease-in-out;
        }


        .shakeIntroElement {
            animation: shakeIntroElement 0.5s;
        }

        @keyframes shakeIntroElement {
            0% {
                transform: translate(1px, 1px) rotate(0deg);
            }
            10% {
                transform: translate(-1px, -2px) rotate(-1deg);
            }
            20% {
                transform: translate(-3px, 0px) rotate(1deg);
            }
            30% {
                transform: translate(3px, 2px) rotate(0deg);
            }
            40% {
                transform: translate(1px, -1px) rotate(1deg);
            }
            50% {
                transform: translate(-1px, 2px) rotate(-1deg);
            }
            60% {
                transform: translate(-3px, 1px) rotate(0deg);
            }
            70% {
                transform: translate(3px, 1px) rotate(-1deg);
            }
            80% {
                transform: translate(-1px, -1px) rotate(1deg);
            }
            90% {
                transform: translate(1px, 2px) rotate(0deg);
            }
            100% {
                transform: translate(1px, -2px) rotate(-1deg);
            }
        }

        .showIntroElement:not(.tank) {
            transform: scale(1);
        }

        @media screen and (max-aspect-ratio: 2.2/1) {
            .showIntroElement {
                transform: scale(1);
            }
        }

        #screen {
            width: 100vw;
            height: 100vh;
            position: absolute;
            z-index: 1;
            left: 0;
            top: 0;
        }

        @media screen and (min-aspect-ratio: 2.2/1) {

            .MoveTitleClass {
                animation: title-up 0.3s ease-in;
                transition: 2s;
                animation-delay: 2.75s;
                animation-fill-mode: forwards;
            }
        }

        @media screen and (max-aspect-ratio: 2.2/1) {

            .MoveTitleClass {
                animation: title-left 0.5s ease-in;
                transition: 2s;
                animation-fill-mode: forwards;
            }
        }

        @media screen and (min-aspect-ratio: 2.2/1) {
            #moveTitle {
                width: 50vw;
                position: absolute !important;

            }

            #continue {
                width: 18vw;
                position: absolute !important;
                left: 65vw !important;
                margin-left: 0 !important;
                bottom: 32vh !important;
            }
        }


        .frontPage {
            font-size: 7vw;
            text-align: center;
            position: relative;
            top: 0;
            font-weight: bold;
        }


        .frontPage {
            position: relative;
            top: 10vh;
            opacity: 0;
            animation: title-fade-in 0.56s ease-out;
            animation-fill-mode: forwards;
        }


        @keyframes title-fade-in {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }


        @keyframes title-left {
            from {
                transform: scale(1);
            }
            to {
                transform: scale(-5);
                opacity: 0;
                display: none;
            }
        }


        @keyframes title-up {
            from {
                transform: scale(1);
            }
            to {
                transform: scale(-5);
                opacity: 0;
                display: none;
            }
        }


        .continue {
            width: 50vw;
            margin-left: 25vw;
            font-size: calc((3vw + 3vh) / 2);
            height: 14vh;
            position: absolute;
            bottom: 18vh;
            background-color: #00539C;
            border: none;
            color: white;
            cursor: pointer;
        }

        #moveTitle {
            letter-spacing: 0.2vw;
            position: absolute;
            top: -3vw;
            left: 25vw;
            width: 50vw;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            user-select: none;
        }

        .removeButton {
            animation: growFade 0.5s ease-in-out forwards;
        }

        @keyframes growFade {
            from {
                opacity: 1;
                transform: scale(1);
            }
            to {
                opacity: 0;
                transform: scale(0);
                display: none;
            }
        }

        .game {
            transform: translate(-20vw, 0vh);
            opacity: 0;
            transform-origin: center;
            position: absolute;
            background-color: #EAD0A8;
        }

        .GameBlocks {
            background-color: #EAD0A8;
            position: absolute;
            top: 0;
            display: grid;
            grid-template-columns: repeat(20, 5.6vw);
            grid-gap: 0;
            grid-template-rows: repeat(20, 5.6vw);
            border-radius: 0.45vw;
        }

        .GameBlocks * {
            border-radius: 0.3vw;
        }

        .showPlayingGame {
            display: block;
            opacity: 1;
        }

        .gameblocksitem {
            position: relative;
            left: 0.05vw;
            top: 0.05vw;
            width: 5.5vw;
            height: 5.5vw;
            background-color: rgba(255, 255, 255, 0.3);
        }

        .rock {
            background-color: darkgrey !important;
            background-image: url("https://cdn.vectorstock.com/i/500p/91/18/gray-grey-rock-stone-wall-vector-23039118.jpg"); /* Add your rock texture image here */
            background-size: cover;
        }

        .regularBlock {
            background-color: orange !important;
        }
    </style>
</head>
<body>
<div class="game" id="game">
    <div class="instructions">
        <div class="wasdtoMove">
            USE WASD TO MOVE
        </div>
        <div class="mousetoShoot">
            USE MOUSE TO AIM/SHOOT
        </div>
    </div>
    <div class="GameBlocks" id="GameBlocks">
    </div>
    <div id="screen"></div>
</div>
<div id="entireTankBody" class="introAnimation">
    <div class="tank" id="tankMove">
        <div class="innerStuff">
            <div class="tankBody"></div>
            <div class="tankTreads_1"></div>
            <div class="tankTreads_2"></div>
            <div class="movetreadsHide">
                <div class="lightTankTreads_1 movetreads pauseAnimation"></div>
                <div class="lightTankTreads_2 movetreads pauseAnimation"></div>
                <div class="lightTankTreads_3 movetreads pauseAnimation"></div>
                <div class="lightTankTreads_4 movetreads pauseAnimation"></div>
                <div class="lightTankTreads_5 movetreads pauseAnimation"></div>
                <div class="lightTankTreads_6 movetreads pauseAnimation"></div>
                <div class="lightTankTreads_7 movetreads pauseAnimation"></div>
                <div class="lightTankTreads_8 movetreads pauseAnimation"></div>
            </div>
        </div>
    </div>

    <div class="fullTurret introAnimation" id='fullTurret'>
        <div class="tankTop"></div>
        <div class="nozzle"></div>
        <div class="smallJointNozzle"></div>
        <div class="bigJointNozzle"></div>
        <div class="tankTopSmall"></div>
        <div class="tankTopSmallRight"></div>
        <div class="tankTopSmallLeftTop"></div>
        <div class="tankTopSmallLeftMiddle"></div>
        <div class="tankTopSmallLeftBottom"></div>
    </div>
</div>

<div id="moveTitle" class="introAnimation nottank">
    <div class="frontPage">
        THE TANK
        GAME
    </div>
</div>
<input type="button" class="continue introAnimation nottank" value="<< PLAY >>" id="continue"
       onclick="continueFunction()">
<script>
    const gridSize = 20;
    const gridElement = document.getElementById('GameBlocks');
    const level1 = [
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1],
        [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
    ];

    function createGrid(level) {
        for (let row = 0; row < gridSize; row++) {
            for (let col = 0; col < gridSize; col++) {
                const block = document.createElement('div');
                block.classList.add('gameblocksitem');
                if (level[row][col] === 1) {
                    block.classList.add('rock');
                } else if (level[row][col] === 2) {
                    block.classList.add('regularBlock');
                }
                gridElement.appendChild(block);
            }
        }
    }

    createGrid(level1)

    function continueFunction() {
        let title = document.getElementById("moveTitle");
        title.classList.add("MoveTitleClass");
        let continueButton = document.getElementById("continue");
        continueButton.classList.add("removeButton");
        setTimeout(() => {
            let game = document.getElementById("game");
            game.classList.add("showPlayingGame")
            let screen = document.getElementById("screen");
            screen.classList.add("screenGone")
            document.addEventListener('keydown', (e) => {
                keys[e.code] = true;
            });

            document.addEventListener('keyup', (e) => {
                if (keys['KeyW'] || keys['KeyA'] || keys['KeyS'] || keys['KeyD'] || keys['ArrowUp'] || keys['ArrowLeft'] || keys['ArrowDown'] || keys['ArrowRight']) {
                    MovingTreads.forEach(div => {
                        div.classList.add("pauseAnimation")
                    })
                }
                keys[e.code] = false;
            });

            document.addEventListener('mousemove', (e) => {
                mousePosition.x = e.clientX;
                mousePosition.y = e.clientY;
            });
        }, 1000);

    }

    document.addEventListener('DOMContentLoaded', () => {
        const elements = ['moveTitle', 'entireTankBody', 'continue'];
        let delay = 0;

        elements.forEach((elementId) => {
            setTimeout(() => {
                document.getElementById(elementId).classList.add('showIntroElement');
                document.body.classList.add('shakeIntroElement');
                setTimeout(() => {
                    document.body.classList.remove('shakeIntroElement');
                }, 500); // Shake duration
            }, delay);
            delay += 1200; // 0.75s for the animation + 1s delay between each element
        });
    });

    const div = document.getElementById('tankMove');
    const turret = document.getElementById('fullTurret');
    const MovingTreads = document.querySelectorAll(".movetreads")
    const gameDiv = document.getElementById('game'); // Reference to the game div
    let position = {x: 50, y: 50}; // Position in vw and vh
    let offset = (window.screen.width) * 0.013
    let gamePosition = {x: -offset, y: 0}; // Position of the game div
    const rotationSpeed = 5; // Rotation speed in degrees per frame
    const angleThreshold = 1; // Minimum angle difference to apply rotation in degrees
    let keys = {};
    let mousePosition = {x: 0, y: 0};
    let currentRotation = 0; // Initial rotation angle
    let direction = 0
    let drivingSpeed = 0.2

    // Put this wherever you change drivingSpeed

    MovingTreads.forEach(div => {
        div.style.animation = `move ${0.08 / drivingSpeed}s linear infinite`
    });


    function getShortestRotationAngle(current, target) {
        let delta = target - current;
        delta = ((delta + 180) % 360 + 540) % 360 - 180;
        return current + delta;
    }

    // Move Body
    function updatePosition() {
        if ((keys['KeyW'] || keys['ArrowUp']) && (keys['KeyA'] || keys['ArrowLeft'])) {
            direction = getShortestRotationAngle(direction, -45)
        } else if ((keys['KeyW'] || keys['ArrowUp']) && (keys['KeyD'] || keys['ArrowRight'])) {
            direction = getShortestRotationAngle(direction, 45)
        } else if ((keys['KeyA'] || keys['ArrowLeft']) && (keys['KeyS'] || keys['ArrowDown'])) {
            direction = getShortestRotationAngle(direction, -135)
        } else if ((keys['KeyS'] || keys['ArrowDown']) && (keys['KeyD'] || keys['ArrowRight'])) {
            direction = getShortestRotationAngle(direction, 135)
        } else if (keys['KeyS'] || keys['ArrowDown']) {
            direction = getShortestRotationAngle(direction, -180)
        } else if (keys['KeyD'] || keys['ArrowRight']) {
            direction = getShortestRotationAngle(direction, 90)
        } else if (keys['KeyW'] || keys['ArrowUp']) {
            direction = getShortestRotationAngle(direction, 360)
        } else if (keys['KeyA'] || keys['ArrowLeft']) {
            direction = getShortestRotationAngle(direction, -90)
        }

        if (keys['KeyW'] || keys['KeyA'] || keys['KeyS'] || keys['KeyD'] || keys['ArrowUp'] || keys['ArrowLeft'] || keys['ArrowDown'] || keys['ArrowRight']) {
            MovingTreads.forEach(div => {
                div.classList.remove("pauseAnimation")
            })
        }


        // Calculate the angle between the center of the div and the cursor
        const rect = div.getBoundingClientRect();
        const divCenterX = rect.left + rect.width / 2;
        const divCenterY = rect.top + rect.height / 2;
        const targetAngle = Math.atan2(mousePosition.y - divCenterY, mousePosition.x - divCenterX) * (180 / Math.PI);

        // Smoothly rotate towards the target angle
        let angleDifference = targetAngle - currentRotation;

        // Ensure angle difference is within -180 to 180 degrees range
        angleDifference = (angleDifference + 180) % 360 - 180;

        // Adjust rotation direction to take the shortest path
        if (Math.abs(angleDifference) > 180) {
            angleDifference -= Math.sign(angleDifference) * 360;
        }

        if (Math.abs(angleDifference) > angleThreshold) {
            if (angleDifference > 0) {
                currentRotation += Math.min(rotationSpeed, angleDifference);
            } else {
                currentRotation -= Math.min(rotationSpeed, -angleDifference);
            }
        }

        // Apply translation and rotation
        div.style.transform = `translate(50vw, 51vh) rotate(${direction}deg)`;
        turret.style.transform = `translate(${0.8 + position.x}vw, ${position.y + 0.4}vh) rotate(${currentRotation + 90}deg)`;

        let newTop = gamePosition.y;
        let newLeft = gamePosition.x;

        // Update the position of the game div based on the keys pressed
        if (keys['KeyW'] || keys['ArrowUp']) newTop += drivingSpeed;
        if (keys['KeyS'] || keys['ArrowDown']) newTop -= drivingSpeed;
        if (keys['KeyA'] || keys['ArrowLeft']) newLeft += drivingSpeed;
        if (keys['KeyD'] || keys['ArrowRight']) newLeft -= drivingSpeed;


        if (!isColliding(newLeft, gamePosition.y)) {
            gamePosition.x = newLeft;
            console.log("No Collide!")
        }
        if (!isColliding(gamePosition.x, newTop)) {
            gamePosition.y = newTop;
            console.log("No Collide!")
        }


        // Apply the new position to the game div
        gameDiv.style.transform = `translate(${gamePosition.x}vw, ${gamePosition.y}vw)`;

        requestAnimationFrame(updatePosition);
    }

    requestAnimationFrame(updatePosition);

    let staticDivs = document.querySelectorAll('.rock')

    function isColliding(newLeft, newTop) {
        let MoveableRectWidth = (window.screen.width) / (100/5)
        const movableRect = {
            top: window.innerHeight / 2 - 25,
            left: window.innerWidth / 2 - 25,
            right: window.innerWidth / 2 + 25,
            bottom: window.innerHeight / 2 + 25
        };

        for (let staticDiv of staticDivs) {
            const staticRect = staticDiv.getBoundingClientRect();

            const adjustedStaticRect = {
                top: staticRect.top + newTop - gamePosition.y,
                left: staticRect.left + newLeft - gamePosition.x,
                right: staticRect.right + newLeft - gamePosition.x,
                bottom: staticRect.bottom + newTop - gamePosition.y
            };

            if (!(movableRect.right <= adjustedStaticRect.left ||
                movableRect.left >= adjustedStaticRect.right ||
                movableRect.bottom <= adjustedStaticRect.top ||
                movableRect.top >= adjustedStaticRect.bottom)) {
                console.log("Collide!")
                return true;
            }
        }
        console.log("No Collide!")
        return false;
    }
</script>

</body>
</html>