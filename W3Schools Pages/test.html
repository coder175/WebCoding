<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rotating Div Example</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            background-color: #f0f0f0;
        }
        #rotatingDiv {
            width: 200px;
            height: 200px;
            background-color: #3498db;
            display: flex;
            justify-content: center;
            align-items: center;
            color: white;
            font-family: Arial, sans-serif;
            font-size: 18px;
            transition: transform 0.1s linear;
        }
        #controls {
            position: absolute;
            top: 20px;
            left: 20px;
        }
    </style>
</head>
<body>
    <div id="rotatingDiv">Rotating Div</div>
    <div id="controls">
        <label for="angleInput">Angle:</label>
        <input type="number" id="angleInput" min="0" max="359" value="0">
        <label for="speedInput">Speed (deg/s):</label>
        <input type="number" id="speedInput" min="1" max="360" value="180">
        <button id="updateButton">Update</button>
    </div>

    <script>
        function rotateDiv(elementId, initialAngle, speed) {
            const div = document.getElementById(elementId);
            let currentRotation = 0;
            let targetRotation = initialAngle;

            function animate() {
                if (currentRotation !== targetRotation) {
                    let diff = (targetRotation - currentRotation + 360) % 360;
                    if (diff > 180) diff -= 360;

                    let step = Math.min(Math.abs(diff), speed / 60);
                    if (diff < 0) step = -step;

                    currentRotation = (currentRotation + step + 360) % 360;
                    div.style.transform = `rotate(${currentRotation}deg)`;
                }
                requestAnimationFrame(animate);
            }

            animate();

            return function updateAngle(newAngle, newSpeed) {
                targetRotation = newAngle;
                speed = newSpeed;
            };
        }

        // Initialize rotation
        const updateRotation = rotateDiv('rotatingDiv', 0, 180);

        // Set up event listeners
        const angleInput = document.getElementById('angleInput');
        const speedInput = document.getElementById('speedInput');
        const updateButton = document.getElementById('updateButton');

        updateButton.addEventListener('click', () => {
            const newAngle = parseInt(angleInput.value);
            const newSpeed = parseInt(speedInput.value);
            updateRotation(newAngle, newSpeed);
        });
    </script>
</body>
</html>